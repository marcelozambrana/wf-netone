<ion-header>
  <ion-navbar>
    <ion-title>{{titulo}} Cliente</ion-title>
  </ion-navbar>
</ion-header>


<ion-content padding class="cliente-content">

  <form padding [formGroup]="clienteForm" novalidate>

    <div *ngIf="passo==1 || isClienteCpfExistente">

      <h6>Informe seu CPF/CNPJ</h6>
      <ion-list inset>
        <ion-item>
          <ion-label floating>CPF/CNPJ</ion-label>
          <ion-input type="text" name="cpf" [brmasker]="{person: true}" formControlName="cpfCnpj" [(ngModel)]="cliente.cpfCnpj" [disabled]="isClienteCpfExistente"></ion-input>
        </ion-item>

        <button ion-button block *ngIf="!isClienteCpfExistente" (click)="validaCpfEContinua(cliente)">Continuar</button>
      </ion-list>

    </div>


    <div *ngIf="passo==2">
      <br/>
      <h6>Dados gerais</h6>
      <ion-list inset>
        <ion-item>
          <ion-label floating>Nome Completo/Razão Social</ion-label>
          <ion-input type="text" formControlName="nome" [(ngModel)]="cliente.nome"></ion-input>
        </ion-item>

        <ion-item *ngIf="isPessoaJuridica">
          <ion-label floating>Fantasia</ion-label>
          <ion-input type="text" formControlName="fantasia" [(ngModel)]="cliente.fantasia"></ion-input>
        </ion-item>

        <ion-item>
          <ion-label floating>RG/IE</ion-label>
          <ion-input type="text" formControlName="rgInscricaoEstadual" [(ngModel)]="cliente.rgInscricaoEstadual"></ion-input>
        </ion-item>

        <ion-item>
          <ion-label floating>E-mail</ion-label>
          <ion-input type="email" formControlName="email" [(ngModel)]="cliente.email"></ion-input>
        </ion-item>

        <ion-item>
          <ion-label floating>Telefone Fixo</ion-label>
          <ion-input type="text" formControlName="telefone" [brmasker]="{phone: true}" [(ngModel)]="cliente.telefone"></ion-input>
        </ion-item>

        <ion-item>
          <ion-label floating>Celular</ion-label>
          <ion-input type="text" formControlName="celular" [brmasker]="{phone: true}" [(ngModel)]="cliente.celular"></ion-input>
        </ion-item>

        <button ion-button block (click)="validaDadosGeraisEContinua(cliente)">Continuar</button>
      </ion-list>

    </div>

    <ion-list inset *ngIf="passo==3">
      <br/>
      <h6>Dados de endereco</h6>
      <ion-item>
        <ion-label floating>Logradouro</ion-label>
        <ion-input text-uppercase type="text"maxlengthmax="100" formControlName="endereco" [(ngModel)]="cliente.endereco.endereco"></ion-input>
      </ion-item>

      <ion-item>
        <ion-label floating>Nº</ion-label>
        <ion-input type="number" pattern="\\d*" formControlName="numero" [(ngModel)]="cliente.endereco.numero"></ion-input>
      </ion-item>


      <ion-item>
        <ion-label floating>CEP</ion-label>
        <ion-input type="text" [brmasker]="{mask:'00.000-000', len:10}" formControlName="cep" [(ngModel)]="cliente.endereco.cep"></ion-input>
      </ion-item>

      <ion-item>
        <ion-label floating>Bairro</ion-label>
        <ion-input text-uppercase type="text" maxlength="40" formControlName="bairro" [(ngModel)]="cliente.endereco.bairro"></ion-input>
      </ion-item>

      <ion-item>
        <ion-label floating>Cidade</ion-label>
        <ion-input text-uppercase type="text" maxlength="40" formControlName="cidade" [(ngModel)]="cliente.endereco.cidade"></ion-input>
      </ion-item>

      <ion-item>
        <ion-label text-uppercase floating>UF</ion-label>
        <ion-select formControlName="uf" [(ngModel)]="cliente.endereco.uf">
          <ion-option value="AC">ACRE</ion-option>
          <ion-option value="AL">ALAGOAS</ion-option>
          <ion-option value="AP">AMAPA</ion-option>
          <ion-option value="AM">AMAZONAS</ion-option>
          <ion-option value="BA">BAHIA</ion-option>
          <ion-option value="CE">CEARA</ion-option>
          <ion-option value="DF">DISTRITO FEDERAL</ion-option>
          <ion-option value="ES">ESPIRITO SANTO</ion-option>
          <ion-option value="GO">GOIAS</ion-option>
          <ion-option value="MA">MARANHAO</ion-option>
          <ion-option value="MT">MATO GROSSO</ion-option>
          <ion-option value="MS">MATO GROSSO DO SUL</ion-option>
          <ion-option value="MG">MINAS GERAIS</ion-option>
          <ion-option value="PA">PARA</ion-option>
          <ion-option value="PB">PARAIBA</ion-option>
          <ion-option value="PR">PARANA</ion-option>
          <ion-option value="PE">PERNAMBUCO</ion-option>
          <ion-option value="PI">PIAUI</ion-option>
          <ion-option value="RJ">RIO DE JANEIRO</ion-option>
          <ion-option value="RN">RIO GRANDE DO NORTE</ion-option>
          <ion-option value="RS">RIO GRANDE DO SUL</ion-option>
          <ion-option value="RO">RONDONIA</ion-option>
          <ion-option value="RR">RORAIMA</ion-option>
          <ion-option value="SC">SANTA CATARINA</ion-option>
          <ion-option value="SP">SAO PAULO</ion-option>
          <ion-option value="SE">SERGIPE</ion-option>
          <ion-option value="TO">TOCANTIS</ion-option>
        </ion-select>
      </ion-item>

      <button *ngIf="!isClienteCpfExistente" ion-button block (click)="adicionar(cliente)">Salvar</button>
      <button *ngIf="isClienteCpfExistente" ion-button block (click)="atualizar(cliente)">Salvar</button>
      <button ion-button block outline (click)="cancelar()">Cancelar</button>

    </ion-list>

  </form>

</ion-content>